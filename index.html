<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î™©Ìëú Ï∂îÏ†ÅÍ∏∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
            padding: 12px;
            min-height: 100vh;
            transition: background 0.3s;
            max-width: 320px;
            margin: 0 auto;
        }

        body.theme-light {
            background: linear-gradient(135deg, #FAFAFA 0%, #FFFFFF 100%);
        }

        body.theme-ocean {
            background: linear-gradient(135deg, #E8F4FD 0%, #F5FAFF 100%);
        }

        body.theme-yellow {
            background: linear-gradient(135deg, #FFFAEB 0%, #FFFEF5 100%);
        }

        body.theme-dark {
            background: linear-gradient(135deg, #1F2937 0%, #374151 100%);
        }

        body.theme-pink {
            background: linear-gradient(135deg, #FEF0F5 0%, #FEF8FA 100%);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .header h1 {
            font-size: 16px;
            font-weight: 700;
        }

        body.theme-light .header h1,
        body.theme-ocean .header h1,
        body.theme-yellow .header h1,
        body.theme-pink .header h1 {
            color: rgba(0, 0, 0, 0.7);
        }

        body.theme-dark .header h1 {
            color: rgba(255, 255, 255, 0.9);
        }

        .summary-stats {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
            font-size: 11px;
            justify-content: center;
        }

        .summary-item {
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: 600;
        }

        body.theme-light .summary-item {
            background: white;
            color: #6B7280;
        }

        body.theme-ocean .summary-item {
            background: white;
            color: #0284C7;
        }

        body.theme-yellow .summary-item {
            background: white;
            color: #D97706;
        }

        body.theme-dark .summary-item {
            background: #374151;
            color: #9CA3AF;
        }

        body.theme-pink .summary-item {
            background: white;
            color: #DB2777;
        }

        .theme-selector {
            display: flex;
            gap: 4px;
            opacity: 0.3;
            transition: opacity 0.2s;
        }

        .theme-selector:hover {
            opacity: 1;
        }

        .theme-btn {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 1px solid rgba(128, 128, 128, 0.3);
            cursor: pointer;
            transition: transform 0.2s;
        }

        .theme-btn:hover {
            transform: scale(1.2);
        }

        .theme-btn.active {
            border: 2px solid rgba(0, 0, 0, 0.5);
        }

        .theme-light { background: #FFFFFF; }
        .theme-ocean { background: #E8F4FD; }
        .theme-yellow { background: #FFFAEB; }
        .theme-dark { background: #1F2937; }
        .theme-pink { background: #FEF0F5; }

        .sort-buttons {
            position: relative;
            margin-bottom: 8px;
        }

        .sort-btn-main {
            width: 100%;
            padding: 6px;
            border: none;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 4px;
        }

        body.theme-light .sort-btn-main {
            background: white;
            color: #6B7280;
        }

        body.theme-ocean .sort-btn-main {
            background: white;
            color: #0284C7;
        }

        body.theme-yellow .sort-btn-main {
            background: white;
            color: #D97706;
        }

        body.theme-dark .sort-btn-main {
            background: #374151;
            color: #9CA3AF;
        }

        body.theme-pink .sort-btn-main {
            background: white;
            color: #DB2777;
        }

        .sort-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            margin-top: 4px;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            display: none;
            z-index: 10;
        }

        .sort-dropdown.active {
            display: block;
        }

        .sort-option {
            padding: 8px;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        body.theme-light .sort-dropdown {
            background: white;
        }

        body.theme-light .sort-option:hover {
            background: #F3F4F6;
        }

        body.theme-ocean .sort-dropdown {
            background: white;
        }

        body.theme-ocean .sort-option {
            color: #0284C7;
        }

        body.theme-ocean .sort-option:hover {
            background: #F0F9FF;
        }

        body.theme-yellow .sort-dropdown {
            background: white;
        }

        body.theme-yellow .sort-option {
            color: #D97706;
        }

        body.theme-yellow .sort-option:hover {
            background: #FFFBEB;
        }

        body.theme-dark .sort-dropdown {
            background: #374151;
        }

        body.theme-dark .sort-option {
            color: #D1D5DB;
        }

        body.theme-dark .sort-option:hover {
            background: #4B5563;
        }

        body.theme-pink .sort-dropdown {
            background: white;
        }

        body.theme-pink .sort-option {
            color: #DB2777;
        }

        body.theme-pink .sort-option:hover {
            background: #FDF2F8;
        }

        .goal-card {
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
        }

        .goal-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
        }

        .goal-card.completed {
            opacity: 0.7;
        }

        body.theme-light .goal-card {
            background: white;
            border: 1px solid #E5E7EB;
        }

        body.theme-ocean .goal-card {
            background: white;
            border: 1px solid #BFDBFE;
        }

        body.theme-yellow .goal-card {
            background: white;
            border: 1px solid #FDE68A;
        }

        body.theme-dark .goal-card {
            background: #374151;
            border: 1px solid #4B5563;
        }

        body.theme-pink .goal-card {
            background: white;
            border: 1px solid #FBCFE8;
        }

        .goal-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 6px;
        }

        .goal-title-area {
            display: flex;
            align-items: flex-start;
            gap: 6px;
            flex: 1;
        }

        .goal-emoji {
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .goal-emoji svg {
            width: 20px;
            height: 20px;
        }

        body.theme-light .goal-emoji svg {
            fill: none;
            stroke: #6B7280;
            stroke-width: 2;
        }

        body.theme-ocean .goal-emoji svg {
            fill: none;
            stroke: #0284C7;
            stroke-width: 2;
        }

        body.theme-yellow .goal-emoji svg {
            fill: none;
            stroke: #D97706;
            stroke-width: 2;
        }

        body.theme-dark .goal-emoji svg {
            fill: none;
            stroke: #9CA3AF;
            stroke-width: 2;
        }

        body.theme-pink .goal-emoji svg {
            fill: none;
            stroke: #DB2777;
            stroke-width: 2;
        }

        .goal-info {
            flex: 1;
        }

        .goal-title-row {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 2px;
            flex-wrap: wrap;
        }

        .goal-title {
            font-size: 13px;
            font-weight: 600;
        }

        body.theme-dark .goal-title {
            color: #F3F4F6;
        }

        body.theme-light .goal-title,
        body.theme-ocean .goal-title,
        body.theme-yellow .goal-title,
        body.theme-pink .goal-title {
            color: #1a1a1a;
        }

        .progress-badge {
            font-size: 8px;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 8px;
            display: inline-block;
            white-space: nowrap;
        }

        body.theme-light .progress-badge {
            background: #F3F4F6;
            color: #6B7280;
        }

        body.theme-ocean .progress-badge {
            background: #DBEAFE;
            color: #0369A1;
        }

        body.theme-yellow .progress-badge {
            background: #FEF3C7;
            color: #B45309;
        }

        body.theme-dark .progress-badge {
            background: #4B5563;
            color: #D1D5DB;
        }

        body.theme-pink .progress-badge {
            background: #FCE7F3;
            color: #9F1239;
        }

        .goal-actions {
            display: flex;
            gap: 4px;
            align-items: center;
        }

        .edit-btn, .delete-btn, .toggle-subtasks-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            opacity: 0.5;
            transition: opacity 0.2s;
            padding: 0;
        }

        .edit-btn:hover, .delete-btn:hover, .toggle-subtasks-btn:hover {
            opacity: 1;
        }

        .goal-percentage {
            font-size: 15px;
            font-weight: 700;
        }

        body.theme-light .goal-percentage {
            color: #6B7280;
        }

        body.theme-ocean .goal-percentage {
            color: #0284C7;
        }

        body.theme-yellow .goal-percentage {
            color: #D97706;
        }

        body.theme-dark .goal-percentage {
            color: #9CA3AF;
        }

        body.theme-pink .goal-percentage {
            color: #DB2777;
        }

        .progress-container {
            position: relative;
            width: 100%;
            height: 6px;
            background: rgba(0, 0, 0, 0.06);
            border-radius: 100px;
            overflow: hidden;
            margin-bottom: 6px;
        }

        body.theme-dark .progress-container {
            background: rgba(255, 255, 255, 0.1);
        }

        .progress-bar {
            height: 100%;
            border-radius: 100px;
            transition: width 0.5s ease;
        }

        body.theme-light .progress-bar {
            background: linear-gradient(90deg, #D1D5DB 0%, #9CA3AF 100%);
        }

        body.theme-ocean .progress-bar {
            background: linear-gradient(90deg, #BAE6FD 0%, #7DD3FC 100%);
        }

        body.theme-yellow .progress-bar {
            background: linear-gradient(90deg, #FDE68A 0%, #FCD34D 100%);
        }

        body.theme-dark .progress-bar {
            background: linear-gradient(90deg, #6B7280 0%, #9CA3AF 100%);
        }

        body.theme-pink .progress-bar {
            background: linear-gradient(90deg, #F9A8D4 0%, #F472B6 100%);
        }

        .goal-stats {
            font-size: 9px;
            margin-bottom: 6px;
            cursor: pointer;
            user-select: none;
        }

        .stats-main {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        body.theme-dark .stats-main {
            color: #9CA3AF;
        }

        body.theme-light .stats-main,
        body.theme-ocean .stats-main,
        body.theme-yellow .stats-main,
        body.theme-pink .stats-main {
            color: #999;
        }

        .stats-detail {
            display: none;
            margin-top: 4px;
            padding: 6px;
            border-radius: 4px;
            font-size: 10px;
        }

        .stats-detail.active {
            display: flex;
            justify-content: space-between;
        }

        body.theme-light .stats-detail {
            background: #F9FAFB;
        }

        body.theme-ocean .stats-detail {
            background: #F0F9FF;
        }

        body.theme-yellow .stats-detail {
            background: #FFFBEB;
        }

        body.theme-dark .stats-detail {
            background: #1F2937;
        }

        body.theme-pink .stats-detail {
            background: #FDF2F8;
        }

        .stat {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .stat-label {
            font-size: 9px;
        }

        body.theme-dark .stat-label {
            color: #9CA3AF;
        }

        body.theme-light .stat-label,
        body.theme-ocean .stat-label,
        body.theme-yellow .stat-label,
        body.theme-pink .stat-label {
            color: #999;
        }

        .stat-value {
            font-size: 12px;
            font-weight: 600;
        }

        body.theme-dark .stat-value {
            color: #F3F4F6;
        }

        body.theme-light .stat-value,
        body.theme-ocean .stat-value,
        body.theme-yellow .stat-value,
        body.theme-pink .stat-value {
            color: #333;
        }

        .goal-memo {
            font-size: 10px;
            padding: 6px;
            border-radius: 4px;
            margin-bottom: 6px;
            font-style: italic;
        }

        body.theme-light .goal-memo {
            background: #F9FAFB;
            color: #6B7280;
        }

        body.theme-ocean .goal-memo {
            background: #F0F9FF;
            color: #0369A1;
        }

        body.theme-yellow .goal-memo {
            background: #FFFBEB;
            color: #92400E;
        }

        body.theme-dark .goal-memo {
            background: #1F2937;
            color: #D1D5DB;
        }

        body.theme-pink .goal-memo {
            background: #FDF2F8;
            color: #831843;
        }

        .subtasks-section {
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px dashed rgba(0, 0, 0, 0.1);
        }

        body.theme-dark .subtasks-section {
            border-top-color: rgba(255, 255, 255, 0.1);
        }

        .subtasks-section.hidden {
            display: none;
        }

        .subtask-item {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 0;
            font-size: 11px;
        }

        .subtask-checkbox {
            width: 14px;
            height: 14px;
            cursor: pointer;
            flex-shrink: 0;
        }

        .subtask-text {
            flex: 1;
        }

        .subtask-text.completed {
            text-decoration: line-through;
            opacity: 0.6;
        }

        body.theme-dark .subtask-text {
            color: #D1D5DB;
        }

        .subtask-delete {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 12px;
            opacity: 0.4;
            padding: 0;
        }

        .subtask-delete:hover {
            opacity: 1;
        }

        .add-subtask-area {
            display: flex;
            gap: 4px;
            margin-top: 6px;
        }

        .subtask-input {
            flex: 1;
            padding: 4px 6px;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            font-size: 10px;
        }

        body.theme-dark .subtask-input {
            background: #1F2937;
            border-color: #4B5563;
            color: #F3F4F6;
        }

        .add-subtask-btn {
            padding: 4px 8px;
            border: none;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 600;
            cursor: pointer;
            color: white;
        }

        body.theme-light .add-subtask-btn {
            background: #9CA3AF;
        }

        body.theme-ocean .add-subtask-btn {
            background: #7DD3FC;
        }

        body.theme-yellow .add-subtask-btn {
            background: #FCD34D;
        }

        body.theme-dark .add-subtask-btn {
            background: #6B7280;
        }

        body.theme-pink .add-subtask-btn {
            background: #F9A8D4;
        }

        .button-group {
            display: flex;
            gap: 3px;
        }

        button {
            padding: 5px;
            border: none;
            border-radius: 5px;
            font-size: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            color: white;
        }

        .btn-main {
            flex: 1;
        }

        .btn-small {
            flex: 0.7;
        }

        body.theme-light .btn-increase {
            background: #9CA3AF;
        }

        body.theme-light .btn-increase:hover {
            background: #6B7280;
        }

        body.theme-ocean .btn-increase {
            background: #7DD3FC;
        }

        body.theme-ocean .btn-increase:hover {
            background: #38BDF8;
        }

        body.theme-yellow .btn-increase {
            background: #FCD34D;
        }

        body.theme-yellow .btn-increase:hover {
            background: #FBBF24;
        }

        body.theme-dark .btn-increase {
            background: #6B7280;
        }

        body.theme-dark .btn-increase:hover {
            background: #9CA3AF;
        }

        body.theme-pink .btn-increase {
            background: #F9A8D4;
        }

        body.theme-pink .btn-increase:hover {
            background: #F472B6;
        }

        .btn-decrease {
            background: rgba(0, 0, 0, 0.05);
            color: #666;
        }

        .btn-decrease:hover {
            background: rgba(0, 0, 0, 0.1);
        }

        body.theme-dark .btn-decrease {
            background: rgba(255, 255, 255, 0.1);
            color: #D1D5DB;
        }

        body.theme-dark .btn-decrease:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .add-goal-btn {
            width: 100%;
            padding: 10px;
            border-radius: 6px;
            border: 1px dashed;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        body.theme-light .add-goal-btn {
            background: white;
            color: #6B7280;
            border-color: #D1D5DB;
        }

        body.theme-light .add-goal-btn:hover {
            background: #F9FAFB;
        }

        body.theme-ocean .add-goal-btn {
            background: white;
            color: #0284C7;
            border-color: #7DD3FC;
        }

        body.theme-ocean .add-goal-btn:hover {
            background: #F0F9FF;
        }

        body.theme-yellow .add-goal-btn {
            background: white;
            color: #D97706;
            border-color: #FCD34D;
        }

        body.theme-yellow .add-goal-btn:hover {
            background: #FFFBEB;
        }

        body.theme-dark .add-goal-btn {
            background: #374151;
            color: #D1D5DB;
            border-color: #6B7280;
        }

        body.theme-dark .add-goal-btn:hover {
            background: #4B5563;
        }

        body.theme-pink .add-goal-btn {
            background: white;
            color: #DB2777;
            border-color: #F9A8D4;
        }

        body.theme-pink .add-goal-btn:hover {
            background: #FDF2F8;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 20px;
            width: 90%;
            max-width: 300px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            max-height: 80vh;
            overflow-y: auto;
        }

        body.theme-dark .modal-content {
            background: #374151;
        }

        .modal-header {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        body.theme-dark .modal-header {
            color: #F3F4F6;
        }

        .form-group {
            margin-bottom: 12px;
        }

        .form-label {
            display: block;
            margin-bottom: 6px;
            font-size: 11px;
            font-weight: 600;
        }

        body.theme-dark .form-label {
            color: #D1D5DB;
        }

        body.theme-light .form-label,
        body.theme-ocean .form-label,
        body.theme-yellow .form-label,
        body.theme-pink .form-label {
            color: #333;
        }

        .form-input, .form-textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-size: 12px;
            transition: border-color 0.2s;
            font-family: inherit;
        }

        body.theme-dark .form-input,
        body.theme-dark .form-textarea {
            background: #1F2937;
            border-color: #4B5563;
            color: #F3F4F6;
        }

        .form-textarea {
            resize: vertical;
            min-height: 50px;
        }

        .goal-type-selector {
            display: flex;
            gap: 8px;
            margin-top: 6px;
        }

        .type-option {
            flex: 1;
            padding: 8px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 11px;
            font-weight: 600;
        }

        .type-option.selected {
            border-color: #9CA3AF;
            background: #F3F4F6;
        }

        body.theme-dark .type-option {
            border-color: #4B5563;
        }

        body.theme-dark .type-option.selected {
            border-color: #6B7280;
            background: #4B5563;
            color: #F3F4F6;
        }

        .emoji-picker {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 8px;
            margin-top: 6px;
        }

        .emoji-option {
            font-size: 28px;
            padding: 8px;
            cursor: pointer;
            border-radius: 8px;
            text-align: center;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .emoji-option svg {
            width: 28px;
            height: 28px;
        }

        .emoji-option:hover {
            transform: scale(1.1);
        }

        body.theme-light .emoji-option:hover {
            background: #F3F4F6;
        }

        body.theme-ocean .emoji-option:hover {
            background: #F0F9FF;
        }

        body.theme-yellow .emoji-option:hover {
            background: #FFFBEB;
        }

        body.theme-dark .emoji-option:hover {
            background: #4B5563;
        }

        body.theme-pink .emoji-option:hover {
            background: #FDF2F8;
        }

        body.theme-light .emoji-option.selected {
            background: #E5E7EB;
        }

        body.theme-ocean .emoji-option.selected {
            background: #DBEAFE;
        }

        body.theme-yellow .emoji-option.selected {
            background: #FEF3C7;
        }

        body.theme-dark .emoji-option.selected {
            background: #4B5563;
        }

        body.theme-pink .emoji-option.selected {
            background: #FCE7F3;
        }

        body.theme-light .emoji-option svg {
            fill: none;
            stroke: #6B7280;
            stroke-width: 2;
        }

        body.theme-ocean .emoji-option svg {
            fill: none;
            stroke: #0284C7;
            stroke-width: 2;
        }

        body.theme-yellow .emoji-option svg {
            fill: none;
            stroke: #D97706;
            stroke-width: 2;
        }

        body.theme-dark .emoji-option svg {
            fill: none;
            stroke: #9CA3AF;
            stroke-width: 2;
        }

        body.theme-pink .emoji-option svg {
            fill: none;
            stroke: #DB2777;
            stroke-width: 2;
        }

        .modal-buttons {
            display: flex;
            gap: 8px;
            margin-top: 16px;
        }

        .btn-cancel, .btn-submit {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
        }

        .btn-cancel {
            background: #f0f0f0;
            color: #666;
        }

        body.theme-dark .btn-cancel {
            background: #4B5563;
            color: #D1D5DB;
        }

        .btn-submit {
            background: #9CA3AF;
            color: white;
        }

        .celebration {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 60px;
            animation: celebrate 1s ease-out;
            pointer-events: none;
            z-index: 2000;
        }

        @keyframes celebrate {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="theme-light">
    <div class="header">
        <h1>üéØ ÎÇòÏùò Î™©Ìëú</h1>
        <div class="theme-selector">
            <div class="theme-btn theme-light active" onclick="changeTheme('light')"></div>
            <div class="theme-btn theme-ocean" onclick="changeTheme('ocean')"></div>
            <div class="theme-btn theme-yellow" onclick="changeTheme('yellow')"></div>
            <div class="theme-btn theme-dark" onclick="changeTheme('dark')"></div>
            <div class="theme-btn theme-pink" onclick="changeTheme('pink')"></div>
        </div>
    </div>

    <div class="summary-stats">
        <div class="summary-item" id="total-goals">Î™©Ìëú 0Í∞ú</div>
        <div class="summary-item" id="completed-goals">ÏôÑÎ£å 0Í∞ú</div>
    </div>

    <div class="sort-buttons">
        <button class="sort-btn-main" onclick="toggleSortDropdown()">
            <span id="sort-label">Ï†ïÎ†¨: Í∏∞Î≥∏</span>
            <span>‚ñº</span>
        </button>
        <div class="sort-dropdown" id="sort-dropdown">
            <div class="sort-option" onclick="sortGoals('default', 'Í∏∞Î≥∏')">Í∏∞Î≥∏ ÏàúÏÑú</div>
            <div class="sort-option" onclick="sortGoals('progress', 'ÏßÑÌñâÎ•†')">ÏßÑÌñâÎ•† ÎÜíÏùÄ Ïàú</div>
            <div class="sort-option" onclick="sortGoals('name', 'Ïù¥Î¶Ñ')">Ïù¥Î¶Ñ Ïàú</div>
        </div>
    </div>

    <div id="goals-container"></div>

    <button class="add-goal-btn" onclick="openModal()">+ ÏÉàÎ°úÏö¥ Î™©Ìëú</button>

    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header" id="modal-title">ÏÉà Î™©Ìëú ÎßåÎì§Í∏∞</div>
            <div class="form-group">
                <label class="form-label">Î™©Ìëú Ïú†Ìòï</label>
                <div class="goal-type-selector">
                    <div class="type-option selected" onclick="selectGoalType('numeric')" id="type-numeric">
                        <div>üìà ÏàòÏπò Î™©Ìëú</div>
                        <div style="font-size: 9px; margin-top: 2px; opacity: 0.7;">0 ‚Üí 100</div>
                    </div>
                    <div class="type-option" onclick="selectGoalType('checklist')" id="type-checklist">
                        <div>üì¶ ÌîÑÎ°úÏ†ùÌä∏</div>
                        <div style="font-size: 9px; margin-top: 2px; opacity: 0.7;">Ìï† Ïùº Î™©Î°ù</div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">ÏïÑÏù¥ÏΩò ÏÑ†ÌÉù</label>
                <div class="emoji-picker" id="emoji-picker"></div>
            </div>
            <div class="form-group">
                <label class="form-label">Î™©Ìëú Ïù¥Î¶Ñ</label>
                <input type="text" id="goal-name" class="form-input" placeholder="Ïòà: Ï±Ö ÏùΩÍ∏∞">
            </div>
            <div class="form-group" id="numeric-fields">
                <label class="form-label">ÌòÑÏû¨ Í∞í</label>
                <input type="number" id="goal-current" class="form-input" placeholder="0" value="0">
                <label class="form-label" style="margin-top: 8px;">Î™©Ìëú Í∞í</label>
                <input type="number" id="goal-target" class="form-input" placeholder="Ïòà: 12">
            </div>
            <div class="form-group">
                <label class="form-label">Î©îÎ™® (ÏÑ†ÌÉù)</label>
                <textarea id="goal-memo" class="form-textarea" placeholder="Î™©ÌëúÏóê ÎåÄÌïú Í∞ÑÎã®Ìïú Î©îÎ™®"></textarea>
            </div>
            <div class="modal-buttons">
                <button class="btn-cancel" onclick="closeModal()">Ï∑®ÏÜå</button>
                <button class="btn-submit" onclick="saveGoal()">Ï∂îÍ∞Ä</button>
            </div>
        </div>
    </div>

    <script>
        let goals = [];
        let currentTheme = 'light';
        let selectedEmoji = 'target';
        let currentSort = 'default';
        let goalType = 'numeric';
        let editingGoalId = null;

        const iconSvgs = {
            book: '<svg viewBox="0 0 24 24"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20M4 19.5A2.5 2.5 0 0 0 6.5 22H20V2H6.5A2.5 2.5 0 0 0 4 4.5v15z"/></svg>',
            dumbbell: '<svg viewBox="0 0 24 24"><path d="M14.4 14.4 9.6 9.6M18.657 21.485c1.886-1.886 1.886-4.943 0-6.829l-1.414-1.414c-1.886-1.886-4.943-1.886-6.829 0l-1.414 1.414c-1.886 1.886-1.886 4.943 0 6.829l1.414 1.414c1.886 1.886 4.943 1.886 6.829 0l1.414-1.414ZM8.586 8.586c1.886-1.886 1.886-4.943 0-6.829L7.172.343c-1.886-1.886-4.943-1.886-6.829 0L-.071 1.757c-1.886 1.886-1.886 4.943 0 6.829l1.414 1.414c1.886 1.886 4.943 1.886 6.829 0l1.414-1.414Z"/></svg>',
            piggy: '<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="2"/><path d="M20 10c0-.5-.5-1-1-1h-2.5c-1-.5-2.5-1-4.5-1s-3.5.5-4.5 1H5c-.5 0-1 .5-1 1v4c0 .5.5 1 1 1h2.5c1 .5 2.5 1 4.5 1s3.5-.5 4.5-1H19c.5 0 1-.5 1-1v-4Zm-8 7v3m0-16v3"/></svg>',
            run: '<svg viewBox="0 0 24 24"><circle cx="13" cy="5" r="1"/><path d="m17 22-1-9 3-1-1-4-3 1-2-3-2 2-3-2v5l3 3-2 7"/></svg>',
            palette: '<svg viewBox="0 0 24 24"><circle cx="13.5" cy="6.5" r=".5"/><circle cx="17.5" cy="10.5" r=".5"/><circle cx="8.5" cy="7.5" r=".5"/><circle cx="6.5" cy="12.5" r=".5"/><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"/></svg>',
            music: '<svg viewBox="0 0 24 24"><path d="M9 18V5l12-2v13M9 18c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3Zm12-2c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3Z"/></svg>',
            apple: '<svg viewBox="0 0 24 24"><path d="M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06ZM10 2c1 .5 2 2 2 5-1.5 0-3-2-3-5h1Z"/></svg>',
            laptop: '<svg viewBox="0 0 24 24"><rect width="16" height="10" x="4" y="3" rx="2"/><path d="M8 21h8m-10 0h12"/></svg>',
            plane: '<svg viewBox="0 0 24 24"><path d="M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z"/></svg>',
            sprout: '<svg viewBox="0 0 24 24"><path d="M12 22v-5M12 17c-1-3-5-5-9-5 0 5 4 9 9 9Zm0 0c1-3 5-5 9-5 0 5-4 9-9 9Zm3-14c0-5-4-5-4-5s-4 0-4 5c0 2 1 3 2 3 2 0 2-2 2-2s0 2 2 2c1 0 2-1 2-3z"/></svg>',
            star: '<svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>',
            flame: '<svg viewBox="0 0 24 24"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>',
            bulb: '<svg viewBox="0 0 24 24"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5M9 18h6m-7 4h8a2 2 0 0 0 2-2v-1a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v1a2 2 0 0 0 2 2Z"/></svg>',
            graduate: '<svg viewBox="0 0 24 24"><path d="m22 10-10-5L2 10l10 5 10-5z"/><path d="m6 12 4 2 4-2v4.7c0 .2-.1.4-.2.6L12 21l-1.8-1.7c-.1-.2-.2-.4-.2-.6V14z"/></svg>',
            trophy: '<svg viewBox="0 0 24 24"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6m12 5h1.5a2.5 2.5 0 0 0 0-5H18M6 9v5a6 6 0 0 0 12 0V9M6 9h12m-6 12v-3m-4 3h8"/></svg>',
            heart: '<svg viewBox="0 0 24 24"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>',
            coffee: '<svg viewBox="0 0 24 24"><path d="M17 8h1a4 4 0 1 1 0 8h-1M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V8zm7-6v3m-4-3v3m8-3v3"/></svg>',
            target: '<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>',
            home: '<svg viewBox="0 0 24 24"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><path d="M9 22V12h6v10"/></svg>',
            yoga: '<svg viewBox="0 0 24 24"><circle cx="12" cy="5" r="1"/><path d="m9 20 3-6 3 6m-6-8 6 2m-4-4V7l2-3 2 3v3"/></svg>',
            pen: '<svg viewBox="0 0 24 24"><path d="M12 19.5v-15m3 3-3-3-3 3m-5 15h16"/></svg>',
            game: '<svg viewBox="0 0 24 24"><rect width="20" height="12" x="2" y="6" rx="2"/><circle cx="8" cy="12" r="1"/><path d="m15.5 11 .5-1 .5 1 1 .5-1 .5-.5 1-.5-1-1-.5 1-.5z"/></svg>',
            chef: '<svg viewBox="0 0 24 24"><path d="M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z"/><path d="M6 17h12"/></svg>',
            bike: '<svg viewBox="0 0 24 24"><circle cx="18.5" cy="17.5" r="3.5"/><circle cx="5.5" cy="17.5" r="3.5"/><circle cx="15" cy="5" r="1"/><path d="M12 17.5V14l-3-3 4-3 2 3h2"/></svg>'
        };

        function initEmojiPicker() {
            const picker = document.getElementById('emoji-picker');
            picker.innerHTML = '';
            Object.keys(iconSvgs).forEach(iconName => {
                const option = document.createElement('div');
                option.className = 'emoji-option';
                option.innerHTML = iconSvgs[iconName];
                option.onclick = () => selectEmoji(iconName);
                picker.appendChild(option);
            });
        }

        function selectEmoji(iconName) {
            selectedEmoji = iconName;
            document.querySelectorAll('.emoji-option').forEach((opt, index) => {
                opt.classList.remove('selected');
                if (Object.keys(iconSvgs)[index] === iconName) {
                    opt.classList.add('selected');
                }
            });
        }

        function selectGoalType(type) {
            goalType = type;
            document.getElementById('type-numeric').classList.toggle('selected', type === 'numeric');
            document.getElementById('type-checklist').classList.toggle('selected', type === 'checklist');
            document.getElementById('numeric-fields').style.display = type === 'numeric' ? 'block' : 'none';
        }

        function changeTheme(theme) {
            currentTheme = theme;
            document.body.className = `theme-${theme}`;
            
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.theme-btn.theme-${theme}`).classList.add('active');
        }

        function getProgressBadge(percentage) {
            if (percentage === 100) return 'üéâ ÏôÑÎ£å!';
            if (percentage >= 90) return 'üî• Í±∞Ïùò Îã§ ÏôîÏñ¥Ïöî!';
            if (percentage >= 75) return 'üí™ ÌôîÏù¥ÌåÖ!';
            if (percentage >= 50) return '‚ú® Ï†àÎ∞ò ÌÜµÍ≥º!';
            if (percentage >= 25) return 'üå± Ï¢ãÏùÄ ÏãúÏûë!';
            return 'üìç ÏãúÏûë Îã®Í≥Ñ';
        }

        function calculateProgress(goal) {
            if (goal.type === 'checklist') {
                if (!goal.subtasks || goal.subtasks.length === 0) return 0;
                const completed = goal.subtasks.filter(st => st.completed).length;
                return Math.round((completed / goal.subtasks.length) * 100);
            } else {
                return Math.round((goal.current / goal.target) * 100);
            }
        }

        function updateSummary() {
            const total = goals.length;
            const completed = goals.filter(g => calculateProgress(g) >= 100).length;
            document.getElementById('total-goals').textContent = `Î™©Ìëú ${total}Í∞ú`;
            document.getElementById('completed-goals').textContent = `ÏôÑÎ£å ${completed}Í∞ú`;
        }

        function toggleSortDropdown() {
            const dropdown = document.getElementById('sort-dropdown');
            dropdown.classList.toggle('active');
        }

        function sortGoals(type, label) {
            currentSort = type;
            document.getElementById('sort-label').textContent = `Ï†ïÎ†¨: ${label}`;
            document.getElementById('sort-dropdown').classList.remove('active');

            if (type === 'progress') {
                goals.sort((a, b) => calculateProgress(b) - calculateProgress(a));
            } else if (type === 'name') {
                goals.sort((a, b) => a.name.localeCompare(b.name));
            } else {
                goals.sort((a, b) => a.id - b.id);
            }
            renderGoals();
        }

        function showCelebration() {
            const celebration = document.createElement('div');
            celebration.className = 'celebration';
            celebration.textContent = 'üéâ';
            document.body.appendChild(celebration);
            setTimeout(() => celebration.remove(), 1000);
        }

        function toggleStats(goalId) {
            const detail = document.getElementById(`stats-detail-${goalId}`);
            if (detail) {
                detail.classList.toggle('active');
            }
        }

        function toggleSubtasks(goalId) {
            const section = document.getElementById(`subtasks-${goalId}`);
            if (section) {
                section.classList.toggle('hidden');
            }
        }

        function toggleSubtask(goalId, subtaskId) {
            const goal = goals.find(g => g.id === goalId);
            if (goal && goal.subtasks) {
                const subtask = goal.subtasks.find(st => st.id === subtaskId);
                if (subtask) {
                    const oldProgress = calculateProgress(goal);
                    subtask.completed = !subtask.completed;
                    const newProgress = calculateProgress(goal);
                    
                    if (oldProgress < 100 && newProgress >= 100) {
                        showCelebration();
                    }
                    renderGoals();
                }
            }
        }

        function deleteSubtask(goalId, subtaskId) {
            const goal = goals.find(g => g.id === goalId);
            if (goal && goal.subtasks) {
                goal.subtasks = goal.subtasks.filter(st => st.id !== subtaskId);
                renderGoals();
            }
        }

        function addSubtask(goalId) {
            const input = document.getElementById(`subtask-input-${goalId}`);
            const text = input.value.trim();
            
            if (text) {
                const goal = goals.find(g => g.id === goalId);
                if (goal) {
                    if (!goal.subtasks) goal.subtasks = [];
                    goal.subtasks.push({
                        id: Date.now(),
                        text: text,
                        completed: false
                    });
                    input.value = '';
                    renderGoals();
                }
            }
        }

        function renderGoals() {
            const container = document.getElementById('goals-container');
            container.innerHTML = '';

            goals.forEach(goal => {
                const percentage = calculateProgress(goal);
                const badge = getProgressBadge(percentage);
                const isCompleted = percentage >= 100;
                
                const card = document.createElement('div');
                card.className = `goal-card ${isCompleted ? 'completed' : ''}`;
                
                let content = `
                    <div class="goal-header">
                        <div class="goal-title-area">
                            <span class="goal-emoji">${iconSvgs[goal.emoji]}</span>
                            <div class="goal-info">
                                <div class="goal-title-row">
                                    <div class="goal-title">${goal.name}</div>
                                    <div class="progress-badge">${badge}</div>
                                </div>
                            </div>
                        </div>
                        <div class="goal-actions">
                            ${goal.type === 'checklist' ? `<button class="toggle-subtasks-btn" onclick="toggleSubtasks(${goal.id})">üìã</button>` : ''}
                            <div class="goal-percentage">${percentage}%</div>
                            <button class="edit-btn" onclick="editGoal(${goal.id})">‚úèÔ∏è</button>
                            <button class="delete-btn" onclick="deleteGoal(${goal.id})">üóëÔ∏è</button>
                        </div>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar" style="width: ${Math.min(percentage, 100)}%"></div>
                    </div>
                `;

                if (goal.type === 'numeric') {
                    const completed = goal.current;
                    const total = goal.target;
                    const remaining = Math.max(0, total - completed);
                    content += `
                        <div class="goal-stats" onclick="toggleStats(${goal.id})">
                            <div class="stats-main">ÌòÑÏû¨ ${completed} / Î™©Ìëú ${total} ‚ñº</div>
                            <div class="stats-detail" id="stats-detail-${goal.id}">
                                <div class="stat">
                                    <div class="stat-label">ÌòÑÏû¨</div>
                                    <div class="stat-value">${completed}</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-label">Î™©Ìëú</div>
                                    <div class="stat-value">${total}</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-label">ÎÇ®ÏùÄ Ïñë</div>
                                    <div class="stat-value">${remaining}</div>
                                </div>
                            </div>
                        </div>
                    `;
                } else if (goal.type === 'checklist') {
                    const completed = goal.subtasks ? goal.subtasks.filter(st => st.completed).length : 0;
                    const total = goal.subtasks ? goal.subtasks.length : 0;
                    const remaining = total - completed;
                    content += `
                        <div class="goal-stats" onclick="toggleStats(${goal.id})">
                            <div class="stats-main">ÏôÑÎ£å ${completed} / Ï†ÑÏ≤¥ ${total} ‚ñº</div>
                            <div class="stats-detail" id="stats-detail-${goal.id}">
                                <div class="stat">
                                    <div class="stat-label">ÏôÑÎ£å</div>
                                    <div class="stat-value">${completed}</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-label">Ï†ÑÏ≤¥</div>
                                    <div class="stat-value">${total}</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-label">ÎÇ®ÏùÄ Ìï†Ïùº</div>
                                    <div class="stat-value">${remaining}</div>
                                </div>
                            </div>
                        </div>
                    `;
                }

                if (goal.memo) {
                    content += `<div class="goal-memo">"${goal.memo}"</div>`;
                }

                if (goal.type === 'numeric') {
                    content += `
                        <div class="button-group">
                            <button class="btn-increase btn-small" onclick="updateGoal(${goal.id}, 1)">+1</button>
                            <button class="btn-increase btn-main" onclick="updateGoal(${goal.id}, 5)">+5</button>
                            <button class="btn-increase btn-main" onclick="updateGoal(${goal.id}, 10)">+10</button>
                            <button class="btn-decrease btn-small" onclick="updateGoal(${goal.id}, -1)">-1</button>
                            <button class="btn-decrease btn-small" onclick="updateGoal(${goal.id}, -5)">-5</button>
                            <button class="btn-decrease btn-small" onclick="updateGoal(${goal.id}, -10)">-10</button>
                        </div>
                    `;
                }

                if (goal.type === 'checklist' && goal.subtasks) {
                    content += `
                        <div class="subtasks-section" id="subtasks-${goal.id}">
                            ${goal.subtasks.map(subtask => `
                                <div class="subtask-item">
                                    <input type="checkbox" class="subtask-checkbox" 
                                        ${subtask.completed ? 'checked' : ''} 
                                        onchange="toggleSubtask(${goal.id}, ${subtask.id})">
                                    <span class="subtask-text ${subtask.completed ? 'completed' : ''}">${subtask.text}</span>
                                    <button class="subtask-delete" onclick="deleteSubtask(${goal.id}, ${subtask.id})">‚úï</button>
                                </div>
                            `).join('')}
                            <div class="add-subtask-area">
                                <input type="text" class="subtask-input" id="subtask-input-${goal.id}" 
                                    placeholder="ÏÉà Ìï†Ïùº Ï∂îÍ∞Ä" 
                                    onkeypress="if(event.key==='Enter') addSubtask(${goal.id})">
                                <button class="add-subtask-btn" onclick="addSubtask(${goal.id})">Ï∂îÍ∞Ä</button>
                            </div>
                        </div>
                    `;
                }

                card.innerHTML = content;
                container.appendChild(card);
            });
            updateSummary();
        }

        function updateGoal(id, change) {
            const goal = goals.find(g => g.id === id);
            if (goal && goal.type === 'numeric') {
                const oldValue = goal.current;
                goal.current = Math.max(0, goal.current + change);
                
                const oldPercentage = Math.round((oldValue / goal.target) * 100);
                const newPercentage = Math.round((goal.current / goal.target) * 100);
                
                if (oldPercentage < 100 && newPercentage >= 100) {
                    showCelebration();
                }
                
                renderGoals();
            }
        }

        function editGoal(id) {
            const goal = goals.find(g => g.id === id);
            if (!goal) return;

            editingGoalId = id;
            document.getElementById('modal-title').textContent = 'Î™©Ìëú ÏàòÏ†ïÌïòÍ∏∞';
            document.querySelector('.btn-submit').textContent = 'ÏàòÏ†ï';
            
            selectGoalType(goal.type);
            selectEmoji(goal.emoji);
            document.getElementById('goal-name').value = goal.name;
            document.getElementById('goal-memo').value = goal.memo || '';
            
            if (goal.type === 'numeric') {
                document.getElementById('goal-current').value = goal.current;
                document.getElementById('goal-target').value = goal.target;
            }
            
            document.getElementById('modal').classList.add('active');
            initEmojiPicker();
            selectEmoji(goal.emoji);
        }

        function deleteGoal(id) {
            if (confirm('Ïù¥ Î™©ÌëúÎ•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                goals = goals.filter(g => g.id !== id);
                renderGoals();
            }
        }

        function openModal() {
            editingGoalId = null;
            document.getElementById('modal-title').textContent = 'ÏÉà Î™©Ìëú ÎßåÎì§Í∏∞';
            document.querySelector('.btn-submit').textContent = 'Ï∂îÍ∞Ä';
            document.getElementById('modal').classList.add('active');
            initEmojiPicker();
            selectEmoji('target');
            selectGoalType('numeric');
        }

        function closeModal() {
            editingGoalId = null;
            document.getElementById('modal').classList.remove('active');
            document.getElementById('goal-name').value = '';
            document.getElementById('goal-current').value = '0';
            document.getElementById('goal-target').value = '';
            document.getElementById('goal-memo').value = '';
        }

        function saveGoal() {
            const name = document.getElementById('goal-name').value;
            const memo = document.getElementById('goal-memo').value;

            if (!name) {
                alert('Î™©Ìëú Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!');
                return;
            }

            if (editingGoalId) {
                const goal = goals.find(g => g.id === editingGoalId);
                if (goal) {
                    goal.name = name;
                    goal.emoji = selectedEmoji;
                    goal.memo = memo;
                    
                    if (goalType === 'numeric') {
                        const current = parseInt(document.getElementById('goal-current').value) || 0;
                        const target = parseInt(document.getElementById('goal-target').value);
                        if (!target || target <= 0) {
                            alert('Î™©Ìëú Í∞íÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!');
                            return;
                        }
                        goal.current = current;
                        goal.target = target;
                    }
                }
            } else {
                const newGoal = {
                    id: Date.now(),
                    name: name,
                    emoji: selectedEmoji,
                    memo: memo,
                    type: goalType
                };

                if (goalType === 'numeric') {
                    const current = parseInt(document.getElementById('goal-current').value) || 0;
                    const target = parseInt(document.getElementById('goal-target').value);
                    if (!target || target <= 0) {
                        alert('Î™©Ìëú Í∞íÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!');
                        return;
                    }
                    newGoal.current = current;
                    newGoal.target = target;
                } else if (goalType === 'checklist') {
                    newGoal.subtasks = [];
                }

                goals.push(newGoal);
            }
            
            renderGoals();
            closeModal();
        }

        renderGoals();
    </script>
</body>
</html>
